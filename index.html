<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pi to Infinity (Well, Almost)</title>
  <style>
    body { font-family: monospace; background: #222; color: #0f0; padding: 2em; }
    #digits { word-break: break-all; font-size: 1.2em; }
    button { margin-top: 1em; padding: 0.5em 1em; }
  </style>
</head>
<body>
  <h1>Pi Digits Generator</h1>
  <div id="digits">3.</div>
  <button onclick="more()">More digits!</button>
  <script>
let q = 1n, r = 0n, t = 1n, k = 1n, n = 3n, l = 3n;
function nextDigit() {
    if (4n*q + r - t < n*t) {
        let digit = n;
        r = 10n * (r - n * t);
        n = ((10n * (3n*q + r)) / t) - 10n * n;
        q = 10n * q;
        return digit.toString();
    } else {
        r = (2n*q + r) * l;
        n = (q*(7n*k + 2n) + r*l) / (t*l);
        q = q * k;
        t = t * l;
        l = l + 2n;
        k = k + 1n;
        return nextDigit();
    }
}

let started = false;
function more(count=20) {
    let digits = '';
    if (!started) {
        // Print the 3 and decimal point
        digits += nextDigit() + '.';
        started = true;
        count--;
    }
    for (let i = 0; i < count; i++) {
        digits += nextDigit();
    }
    document.getElementById('digits').textContent += digits;
}
</script>
</body>
</html>

