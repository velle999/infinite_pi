<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Infinite Pi Digits Generator</title>
  <style>
    body { font-family: monospace; background: #222; color: #0f0; padding: 2em; }
    #digits { word-break: break-all; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1>Pi Digits Generator</h1>
  <div id="digits"></div>
  <script>
    // Pi spigot with BigInt
    let q = 1n, r = 0n, t = 1n, k = 1n, n = 3n, l = 3n;
    let started = false;

    function nextDigit() {
      if (4n*q + r - t < n*t) {
        let digit = n;
        r = 10n * (r - n * t);
        n = ((10n * (3n*q + r)) / t) - 10n * n;
        q = 10n * q;
        return digit.toString();
      } else {
        r = (2n*q + r) * l;
        n = (q*(7n*k + 2n) + r*l) / (t*l);
        q = q * k;
        t = t * l;
        l = l + 2n;
        k = k + 1n;
        return nextDigit();
      }
    }

    // Start generating digits on load
    const digitsDiv = document.getElementById('digits');
    let printed = 0;

    function printDigitsChunk(chunkSize = 50) {
      let chunk = '';
      if (!started) {
        chunk += nextDigit() + '.';
        started = true;
        printed++;
      }
      for (let i = 0; i < chunkSize; i++) {
        chunk += nextDigit();
        printed++;
      }
      digitsDiv.textContent += chunk;

      // Keep going forever!
      setTimeout(() => printDigitsChunk(chunkSize), 0);
    }

    // Go!
    printDigitsChunk(50);
  </script>
</body>
</html>

